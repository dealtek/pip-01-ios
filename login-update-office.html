<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
    <title>Participate In Program login from new app office </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="inc/jq/themes/theme-02.min.css" />
    <link rel="stylesheet" href="inc/jq/themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script>
	$(function(){
		$( "[data-role='header'], [data-role='footer']" ).toolbar();
		});
    </script>
    <link href="mob.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
<div data-role="header" data-position="fixed" data-theme="a"> 
      <!--add header -->
      
      <div class="box1 center1 boxblue" > <a href="logout.html" rel="external"><img src="pics/appbanner-320x60-home1.png" width="320" height="61" class="center" alt=""></a> </div>
    </div>

<!-- /header -->

<section id="page01111" data-role="page">
      <div role="main" class="ui-content">
    <div class="content" >
          <div class="box1 center1" > 
        
        <!--INSERT START -->
        
        <h3>Participate In Program LOGIN</h3>
        Login to our <strong class="green1">- Secure Server - </strong><br>
        <br>
        <h1> <span class="green1"><strong> 
          <!-- where the response will be displayed -->
          <div id="response"></div>
          </strong></span> </h1>
        <script>


// YO now auto login in after new app sign up just to get all the filed and LS filled in

$(document).ready(function(){
	
//localStorage.getItem("Client_ID") == '' or null
if (
localStorage.getItem("Client_ID") < 1
){
	
	//alert("STOP NO CREDENTAILS")
	
	window.location.replace("login.html");
	
	}else
	{
	//alert("YUMMY CREDENTAILS")
		
// try 2018
		
		localStorage.setItem("lastcheck_test", "01/01/2014");
	
// start post	
	
// show that something is loading
		$('#response').html("<b>Logging Into Participate In Program<br>Updating your info...</b>");
		
		/*
		 * 'post_receiver.php' - where you will pass the form data
		 * $(this).serialize() - to easily read form data
		 * function(data){... - data contains the response from post_receiver.php
		 */

$.post('https://participateinprogram.com/app-data/login-main.php', {			 

Client_ID: localStorage.getItem("Client_ID"),
webpass: localStorage.getItem("password"),

// make sure webpass vs password always cool

	
}, function(data){
			
			// show the response
			// bak $('#response').html(data);
			// FIX THIS WITH BETTER SOON - do dbetter in php page
			$('#response').html("SUCCESS");
			
			// alert("Data: " + data + "\nStatus: " + status);
console.log ('data', data);
output = "";

var date_lastlogin = new Date();
localStorage.setItem('date_lastlogin', date_lastlogin);


$.each(data, function(key, value) {
console. log ('item', key, value);

//output += "<li><a href=\"#\">" + value.Client_ID;  
//output += " " + value.Contact_First + " " + value.Contact_Last + "</a></li>";


localStorage.setItem("Contact_First", value.Contact_First);
localStorage.setItem("Contact_Last", value.Contact_Last);
localStorage.setItem("Client_ID", value.Client_ID);
localStorage.setItem("password", value.password);
localStorage.setItem("type_of_company_number", value.type_of_company_number);
	
	
// tmp ny for now
if (
value.type_of_company_number == 1032
)
{
localStorage.setItem("tocstate", "ny");	
}else{
localStorage.setItem("tocstate", "other");		
}	

localStorage.setItem("Company", value.Company);
localStorage.setItem("Phone1", value.Phone1);
localStorage.setItem("Phone2", value.Phone2);
localStorage.setItem("Fax", value.Fax);
localStorage.setItem("Address", value.Address);
localStorage.setItem("City", value.City);
localStorage.setItem("State", value.State);
localStorage.setItem("Zip", value.Zip);
localStorage.setItem("Billing_Company_Name", value.Billing_Company_Name);
localStorage.setItem("F_Name_Billing", value.F_Name_Billing);
localStorage.setItem("L_Name_Billing", value.L_Name_Billing);
localStorage.setItem("Billing_Address", value.Billing_Address);
localStorage.setItem("Billing_City", value.Billing_City);
localStorage.setItem("Billing_State", value.State);
localStorage.setItem("Billing_Zip", value.Billing_Zip);
localStorage.setItem("Billing_Phone", value.Billing_Phone);
localStorage.setItem("Billing_Fax", value.Billing_Fax);
localStorage.setItem("email_Billing_Address", value.email_Billing_Address);
localStorage.setItem("email_results_tests_idc", value.email_results_tests_idc);
	
//grant num and school
localStorage.setItem("id_additional", value.id_additional);	
localStorage.setItem("NotesMore", value.NotesMore);	
	
//localStorage.setItem("email_Billing_Address", 'yo22em');
localStorage.setItem("cl_emp_First", value.cl_emp_First);
localStorage.setItem("cl_emp_Last", value.cl_emp_Last);
localStorage.setItem("cl_emp_Employee_ID_Num", value.cl_emp_Employee_ID_Num);	

localStorage.setItem("cl_emp_City_Taxi_Permit_No", value.cl_emp_City_Taxi_Permit_No);
localStorage.setItem("cl_emp_City_Taxi_Permit_Expiration", value.cl_emp_City_Taxi_Permit_Expiration);
// nah dupe fields to dump localStorage.setItem("cl_emp_PUC_Number", value.cl_emp_PUC_Number);

localStorage.setItem("cl_emp_Drivers_License_No", value.cl_emp_Drivers_License_No);
localStorage.setItem("cl_emp_Notify_Email", value.cl_emp_Notify_Email);
localStorage.setItem("cl_emp_Notify_PhoneText", value.cl_emp_Notify_PhoneText);
localStorage.setItem("cl_emp_Social_Security", value.cl_emp_Social_Security);
localStorage.setItem("cl_emp_security_code", value.cl_emp_security_code);
		
//new 2019
localStorage.setItem("cl_emp_termination_date", value.cl_emp_termination_date);
localStorage.setItem("cl_emp_date_term_web", value.cl_emp_date_term_web);
localStorage.setItem("cl_emp_status", value.cl_emp_status);
localStorage.setItem("cl_emp_date_entered", value.cl_emp_date_entered);		
	
localStorage.setItem("PUC_Number", value.PUC_Number);
localStorage.setItem("PUC_Date", value.PUC_Date);
localStorage.setItem("Kind_of_Company", value.Kind_of_Company);
localStorage.setItem("Date_Signup", value.Date_Signup);
localStorage.setItem("Date_Terminated", value.Date_Terminated);
localStorage.setItem("date_term_web_CL", value.date_term_web_CL);

localStorage.setItem("Date_Entered", value.Date_Entered);
localStorage.setItem("Status", value.Status);
localStorage.setItem("Type", value.Type);

localStorage.setItem("cl_toc_City", value.cl_toc_City);
localStorage.setItem("cl_toc_term_reason_toggle", value.cl_toc_term_reason_toggle);
localStorage.setItem("email_Confidential_Email", value.email_Confidential_Email);
localStorage.setItem("email_Agency", value.email_Agency);

localStorage.setItem("date_term_web_CL", value.date_term_web_CL);
localStorage.setItem("cl_toc_cert_desc_new", value.cl_toc_cert_desc_new);
localStorage.setItem("cl_toc_cert_desc_renew", value.cl_toc_cert_desc_renew);
localStorage.setItem("cl_toc_cert_fee_signup", value.cl_toc_cert_fee_signup);
localStorage.setItem("cl_toc_cert_fee_renewal", value.cl_toc_cert_fee_renewal);
localStorage.setItem("cl_toc_CommonName", value.cl_toc_CommonName);
localStorage.setItem("cl_toc_show_app_randoms", value.cl_toc_show_app_randoms);
localStorage.setItem("cl_toc_toc_collect_type", value.cl_toc_toc_collect_type);
	
//new 2018
localStorage.setItem("cl_toc_annual_only", value.cl_toc_annual_only);

if(value.cl_toc_agency_name == ""){
localStorage.setItem("cl_toc_agency_name", "CA PUC");
}else{
localStorage.setItem("cl_toc_agency_name", value.cl_toc_agency_name); 
}	

localStorage.setItem("date_TAXI_1stpaid_certific", value.date_TAXI_1stpaid_certific);
localStorage.setItem("Date_TAXI_1st_yr_certi_expire", value.Date_TAXI_1st_yr_certi_expire);
localStorage.setItem("cl_emp_date_last_drug_db", value.cl_emp_date_last_drug_db);
localStorage.setItem("cl_emp_date_last_alc_db", value.cl_emp_date_last_alc_db);
localStorage.setItem("cl_emp_Division_ID_Num", value.cl_emp_Division_ID_Num);
localStorage.setItem("cl_emp_Division_Name", value.cl_emp_Division_Name);

localStorage.setItem("cl_toc_mothership_clientno", value.cl_toc_mothership_clientno);
localStorage.setItem("cl_toc_owner_Client_ID", value.cl_toc_owner_Client_ID);
	
localStorage.setItem("cl_toc_owner_Company", value.cl_toc_owner_Company);
localStorage.setItem("cl_toc_owner_Contact_First", value.cl_toc_owner_Contact_First);
localStorage.setItem("cl_toc_owner_Contact_Last", value.cl_toc_owner_Contact_Last);
localStorage.setItem("cl_toc_owner_Address", value.cl_toc_owner_Address);
localStorage.setItem("cl_toc_owner_City", value.cl_toc_owner_City);
localStorage.setItem("cl_toc_owner_State", value.cl_toc_owner_State);
localStorage.setItem("cl_toc_owner_Zip", value.cl_toc_owner_Zip);
localStorage.setItem("cl_toc_owner_Phone1", value.cl_toc_owner_Phone1);
localStorage.setItem("cl_toc_owner_email_Confidential_Email", value.cl_toc_owner_email_Confidential_Email);
localStorage.setItem("cl_toc_owner_contact_full_c", value.cl_toc_owner_contact_full_c);
localStorage.setItem("cl_toc_owner_contact_some_c", value.cl_toc_owner_contact_some_c);	
	
localStorage.setItem("tocNum1", value.tocNum1);
localStorage.setItem("tocNum2", value.tocNum2);
localStorage.setItem("tocNum3", value.tocNum3);
localStorage.setItem("tocNum4", value.tocNum4);
localStorage.setItem("tocNum5", value.tocNum5);
localStorage.setItem("cl_tocextra1_CommonName", value.cl_tocextra1_CommonName);
localStorage.setItem("cl_tocextra2_CommonName", value.cl_tocextra2_CommonName);
localStorage.setItem("cl_tocextra3_CommonName", value.cl_tocextra3_CommonName);
localStorage.setItem("cl_tocextra4_CommonName", value.cl_tocextra4_CommonName);
localStorage.setItem("cl_tocextra5_CommonName", value.cl_tocextra5_CommonName);
localStorage.setItem("mgr1_email_Confidential_Email", value.mgr1_email_Confidential_Email);
localStorage.setItem("mgr2_email_Confidential_Email", value.mgr2_email_Confidential_Email);
localStorage.setItem("mgr3_email_Confidential_Email", value.mgr3_email_Confidential_Email);
localStorage.setItem("mgr4_email_Confidential_Email", value.mgr4_email_Confidential_Email);
localStorage.setItem("mgr5_email_Confidential_Email", value.mgr5_email_Confidential_Email);
localStorage.setItem("mgr1_contact_full_c", value.mgr1_contact_full_c);
localStorage.setItem("mgr2_contact_full_c", value.mgr2_contact_full_c);
localStorage.setItem("mgr3_contact_full_c", value.mgr3_contact_full_c);
localStorage.setItem("mgr4_contact_full_c", value.mgr4_contact_full_c);
localStorage.setItem("mgr5_contact_full_c", value.mgr5_contact_full_c);

localStorage.setItem("mgr1_contact_some_c", value.mgr1_contact_some_c);
localStorage.setItem("mgr2_contact_some_c", value.mgr2_contact_some_c);
localStorage.setItem("mgr3_contact_some_c", value.mgr3_contact_some_c);
localStorage.setItem("mgr4_contact_some_c", value.mgr4_contact_some_c);
localStorage.setItem("mgr5_contact_some_c", value.mgr5_contact_some_c);	
	
localStorage.setItem("cl_toc_Federal", value.cl_toc_Federal);

localStorage.setItem("z_mod_date", value.z_mod_date);
localStorage.setItem("z_webtmp3", value.z_webtmp3);


//new 11-08-15 (05-09-13 PM)
localStorage.setItem("cert_calc", value.cert_calc);
localStorage.setItem("certfee_calc", value.certfee_calc);

localStorage.setItem("date_TAXI_annual_renewexpir_certification", value.date_TAXI_annual_renewexpir_certification);

localStorage.setItem("date_TAXI_paid_Annual_Renewal_fee", value.date_TAXI_paid_Annual_Renewal_fee);

localStorage.setItem("cl_toc_type_of_consortium", value.cl_toc_type_of_consortium);

localStorage.setItem("Signup_date", value.Signup_date);

// with cert_calc - can dump cals below
localStorage.setItem("sdate", value.sdate);

localStorage.setItem("xdate", value.xdate);
localStorage.setItem("diffdaysint", value.diffdaysint);

if ( value.diffdaysint <= 365){
localStorage.setItem("certgo", 'new');	
}else{
localStorage.setItem("certgo", 'renew');			
}	

localStorage.setItem("done1", "yoyo11");

// nah just on mail login localStorage.setItem("postaccident", '');
// nah localStorage.setItem('postaccdate', '');

localStorage.setItem("cl_toc_LabMaster", value.cl_toc_LabMaster);
localStorage.setItem("LabMasterAccount", value.LabMasterAccount);
localStorage.setItem("LabMasterAcc", value.LabMasterAcc);
localStorage.setItem("LabMasterLocation", value.LabMasterLocation);


// do not initialize these for update just login
//localStorage.setItem("rt_completecheck", "");
//localStorage.setItem("rt_completecheck_alco", "");
//localStorage.setItem("rt_completecheck_drug", "");
//localStorage.setItem("pre_emp_completecheck", "needcheck");
	
	
window.location.replace("login-test-check.html");	


// old yo window.location.replace("dashboard.html");
		
});


			//$('#response2').html(data);
		}).fail(function() {
		
			// just in case posting your form failed
			//alert( "Posting failed." );
			$('#response').html("Login Failed. Please try again or click top logo to login again");
			
		});

		// to prevent refreshing the whole page page
		return false;


	
		
		}//end else	
	

			
})	
</script> 
        
        <!--INSERT END --> 
        
      </div>
          <!-- end .box --> 
        </div>
    <!-- end .content --> 
  </div>
      <!-- /ui-content --> 
      
    </section>
<!-- /page --> 

<!--
<footer data-role="footer" class="ui-barNAH" data-position="fixed" data-theme="a">
<div class="ui-grid-c boxblue">

</div>
</footer> --> 
<!--add footer --> 
<!-- /footer -->

</body>
</html>
